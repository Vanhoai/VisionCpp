cmake_minimum_required(VERSION 3.10)

project(vision_cpp VERSION 1.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Use find package when libraries are installed via Homebrew or other package managers
find_package(OpenCV REQUIRED)
find_package(Eigen3 3.4 REQUIRED NO_MODULE)

add_executable(
        ${PROJECT_NAME}

        # source files
        main.cpp
        src/materials.cpp

        # thresholding
        src/thresholding/thresholding.cpp
        src/thresholding/thresholding.hpp

        # core module
        src/core/macros/macros.hpp # macros
        
        src/core/base/image_processing/image_processing.hpp
        src/core/base/image_processing/image_processing.cpp

        # study
        src/study/eigen3/eigen3.cpp
        src/study/eigen3/eigen3.hpp

        # neural networks module
        src/modules/nn/activation/activation.cpp
        src/modules/nn/activation/activation.hpp
        src/modules/nn/loss/loss.cpp
        src/modules/nn/loss/loss.hpp
        src/modules/nn/layer/layer.cpp
        src/modules/nn/layer/layer.hpp
        src/modules/nn/model/model.cpp
        src/modules/nn/model/model.hpp
        src/modules/nn/model/model_v2.cpp
        src/modules/nn/optimizer/optimizer.cpp
        src/modules/nn/optimizer/optimizer.hpp
        src/modules/nn/prepare/prepare.cpp
        src/modules/nn/prepare/prepare.hpp

        # preprocessing image module
        src/modules/preprocessing_image/filters/blur/blur.cpp
        src/modules/preprocessing_image/filters/blur/blur.hpp
        src/modules/preprocessing_image/filters/sharpen/sharpen.hpp
        src/modules/preprocessing_image/filters/sharpen/sharpen.cpp
        src/modules/preprocessing_image/filters/edge_detection/edge_detection.hpp
        src/modules/preprocessing_image/filters/edge_detection/edge_detection.cpp

        src/modules/preprocessing_image/detectors/haar_cascade/haar_cascade.cpp
        src/modules/preprocessing_image/detectors/haar_cascade/haar_cascade.hpp
        src/modules/preprocessing_image/detectors/hog/hog.cpp
        src/modules/preprocessing_image/detectors/hog/hog.hpp

        src/modules/preprocessing_image/features/features.hpp
        src/modules/preprocessing_image/features/features.cpp
        src/modules/preprocessing_image/features/sift.cpp
        src/modules/preprocessing_image/features/sift.hpp

        # utilities
        src/core/utilities/multivariate_normal/multivariate_normal.cpp
        src/core/utilities/multivariate_normal/multivariate_normal.hpp
)

target_link_libraries(
        ${PROJECT_NAME}

        PRIVATE
        ${OpenCV_LIBS}
        Eigen3::Eigen
        "-framework CoreGraphics"
        "-framework Foundation"

        PUBLIC
        # Add any public libraries here
)