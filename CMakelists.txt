cmake_minimum_required(VERSION 3.10)

project(vision_cpp VERSION 1.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Use find package when libraries are installed via Homebrew or other package managers
find_package(OpenCV REQUIRED)
find_package(Eigen3 3.4 REQUIRED NO_MODULE)

add_executable(
        ${PROJECT_NAME}

        # source files
        main.cpp
        src/materials.cpp

        # image processing
        src/filters/blur/blur.cpp
        src/filters/blur/blur.hpp
        src/filters/sharpen/sharpen.hpp
        src/filters/sharpen/sharpen.cpp
        src/filters/edge_detection/edge_detection.hpp
        src/filters/edge_detection/edge_detection.cpp

        # thresholding
        src/thresholding/thresholding.cpp
        src/thresholding/thresholding.hpp

        # base classes
        src/image_processing.hpp
        src/image_processing.cpp
        src/macros.hpp

        # object detection
        src/detectors/haar_cascade/haar_cascade.cpp
        src/detectors/haar_cascade/haar_cascade.hpp
        src/detectors/hog/hog.cpp
        src/detectors/hog/hog.hpp

        # feature extraction
        src/features/features.hpp
        src/features/features.cpp
        src/features/sift.cpp
        src/features/sift.hpp
        src/tensor/tensor.cpp
        src/tensor/tensor.hpp

        # neural networks
        src/eigen3/eigen3.cpp
        src/eigen3/eigen3.hpp
        src/nn/activation/activation.cpp
        src/nn/activation/activation.hpp
        src/nn/loss/loss.cpp
        src/nn/loss/loss.hpp
        src/nn/layer/layer.cpp
        src/nn/layer/layer.hpp
        src/nn/model/model.cpp
        src/nn/model/model.hpp
        src/nn/optimizer/optimizer.cpp
        src/nn/optimizer/optimizer.hpp
        src/nn/prepare/prepare.cpp
        src/nn/prepare/prepare.hpp


        # utilities
        src/core/utilities/multivariate_normal/multivariate_normal.cpp
        src/core/utilities/multivariate_normal/multivariate_normal.hpp
        src/nn/model/model_v2.cpp
)

target_link_libraries(
        ${PROJECT_NAME}

        PRIVATE
        ${OpenCV_LIBS}
        Eigen3::Eigen
        "-framework CoreGraphics"
        "-framework Foundation"

        PUBLIC
        # Add any public libraries here
)